<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_60) on Tue Jan 10 21:19:42 PST 2017 -->
<title>ConvertPVNameToKey</title>
<meta name="date" content="2017-01-10">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="ConvertPVNameToKey";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ConvertPVNameToKey.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/epics/archiverappliance/config/ConfigService.WAR_FILE.html" title="enum in org.epics.archiverappliance.config"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../org/epics/archiverappliance/config/DefaultConfigService.html" title="class in org.epics.archiverappliance.config"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/epics/archiverappliance/config/ConvertPVNameToKey.html" target="_top">Frames</a></li>
<li><a href="ConvertPVNameToKey.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.epics.archiverappliance.config</div>
<h2 title="Class ConvertPVNameToKey" class="title">Class ConvertPVNameToKey</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.epics.archiverappliance.config.ConvertPVNameToKey</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../org/epics/archiverappliance/config/PVNameToKeyMapping.html" title="interface in org.epics.archiverappliance.config">PVNameToKeyMapping</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">ConvertPVNameToKey</span>
extends java.lang.Object
implements <a href="../../../../org/epics/archiverappliance/config/PVNameToKeyMapping.html" title="interface in org.epics.archiverappliance.config">PVNameToKeyMapping</a></pre>
<div class="block">Most labs use a standard character (typically the ":" or the "-" character) in their naming conventions to separate out the components of a name.
 We want to replace these characters with the File.separator so that the key/file structure reflects the naming convention reasonably closely
 This give us 2 things
 <ol>
 <li>All the files/keys for the entire archiver system do not land in the same folder. This improves performance significantly on ext2/3/4 like filesystems which can handle upto around 10000 files in a folder reasonably well but are very inefficient if this limit is crossed.
 Note, systems like ZFS/BTRFS do not have this limitation.
 </li>
 <li>We have a deterministic way to go from PV name to key/file name</li>
 </ol>
 <p>
 One other issue we need to solve is that some PV's (<code>X:CTRD_V</code>) are substrings of other PV's (<code>X:CTRD_V_BOOK</code>).
 So, files for <code>X:CTRD_V</code> are matches for <code>X:CTRD_V_BOOK</code> as well.
 We can either replace the underscores with /'s as well.
 Or the character that separates the final name component of the PV name from the rest of the file name (time partition info, extension etc) should also be something that would not show up in a PV name at the end.
 For now, we choose the latter and use another property to identify the separator string (for example ":") as the terminator.
 For example, <code>X:CTRD_V_BOOK</code> is mapped to <code>X/CTRD_V_BOOK:</code>.   
 </p>
 <p>
 This class uses two properties obtained from the <code>archappl.properties</code> file to map PV names to keys.
 <ol>
 <li>org.epics.archiverappliance.config.ConvertPVNameToKey.siteNameSpaceSeparators - This is a list of characters that separate the components of the PV name. The syntax for this must satisfy Java's <code>replaceAll</code> regex requirements. So to specify a list containing the ":" and the "-" characters, we have to use <code>[\\:\\-]</code></li>
 <li>org.epics.archiverappliance.config.ConvertPVNameToKey.siteNameSpaceTerminator - This is the character used as the terminator of the PV name portion of the key.</li>
 </ol>
 </p></div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>mshankar</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../org/epics/archiverappliance/config/ConvertPVNameToKey.html#ConvertPVNameToKey--">ConvertPVNameToKey</a></span>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>java.lang.String[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/epics/archiverappliance/config/ConvertPVNameToKey.html#breakIntoParts-java.lang.String-">breakIntoParts</a></span>(java.lang.String&nbsp;pvName)</code>
<div class="block">Break a PV name into parts separated by the site specific separators
 For examples, ABC:123:DEF gets broken into [ABC, 123, DEF]</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/epics/archiverappliance/config/ConvertPVNameToKey.html#containsSiteSeparators-java.lang.String-">containsSiteSeparators</a></span>(java.lang.String&nbsp;pvName)</code>
<div class="block">Return true if the given pvName contains any site specific separators.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/epics/archiverappliance/config/ConvertPVNameToKey.html#convertPVNameToKey-java.lang.String-">convertPVNameToKey</a></span>(java.lang.String&nbsp;pvName)</code>&nbsp;</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>protected java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/epics/archiverappliance/config/ConvertPVNameToKey.html#generateChunkKey-java.lang.String-">generateChunkKey</a></span>(java.lang.String&nbsp;pvName)</code>
<div class="block">One option is to simply override the final element of chunk key generation.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/epics/archiverappliance/config/ConvertPVNameToKey.html#initialize-org.epics.archiverappliance.config.ConfigService-">initialize</a></span>(<a href="../../../../org/epics/archiverappliance/config/ConfigService.html" title="interface in org.epics.archiverappliance.config">ConfigService</a>&nbsp;configService)</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="ConvertPVNameToKey--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ConvertPVNameToKey</h4>
<pre>public&nbsp;ConvertPVNameToKey()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="convertPVNameToKey-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>convertPVNameToKey</h4>
<pre>public&nbsp;java.lang.String&nbsp;convertPVNameToKey(java.lang.String&nbsp;pvName)</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../org/epics/archiverappliance/config/PVNameToKeyMapping.html#convertPVNameToKey-java.lang.String-">convertPVNameToKey</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/epics/archiverappliance/config/PVNameToKeyMapping.html" title="interface in org.epics.archiverappliance.config">PVNameToKeyMapping</a></code></dd>
</dl>
</li>
</ul>
<a name="initialize-org.epics.archiverappliance.config.ConfigService-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initialize</h4>
<pre>public&nbsp;void&nbsp;initialize(<a href="../../../../org/epics/archiverappliance/config/ConfigService.html" title="interface in org.epics.archiverappliance.config">ConfigService</a>&nbsp;configService)
                throws <a href="../../../../org/epics/archiverappliance/config/exception/ConfigException.html" title="class in org.epics.archiverappliance.config.exception">ConfigException</a></pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../org/epics/archiverappliance/config/PVNameToKeyMapping.html#initialize-org.epics.archiverappliance.config.ConfigService-">initialize</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/epics/archiverappliance/config/PVNameToKeyMapping.html" title="interface in org.epics.archiverappliance.config">PVNameToKeyMapping</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../org/epics/archiverappliance/config/exception/ConfigException.html" title="class in org.epics.archiverappliance.config.exception">ConfigException</a></code></dd>
</dl>
</li>
</ul>
<a name="generateChunkKey-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>generateChunkKey</h4>
<pre>protected&nbsp;java.lang.String&nbsp;generateChunkKey(java.lang.String&nbsp;pvName)</pre>
<div class="block">One option is to simply override the final element of chunk key generation. 
 To do that, subclass and override this method. (Of course, you still have to register the subclass in archappl.properties).</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pvName</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a name="containsSiteSeparators-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>containsSiteSeparators</h4>
<pre>public&nbsp;boolean&nbsp;containsSiteSeparators(java.lang.String&nbsp;pvName)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../org/epics/archiverappliance/config/PVNameToKeyMapping.html#containsSiteSeparators-java.lang.String-">PVNameToKeyMapping</a></code></span></div>
<div class="block">Return true if the given pvName contains any site specific separators.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../org/epics/archiverappliance/config/PVNameToKeyMapping.html#containsSiteSeparators-java.lang.String-">containsSiteSeparators</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/epics/archiverappliance/config/PVNameToKeyMapping.html" title="interface in org.epics.archiverappliance.config">PVNameToKeyMapping</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a name="breakIntoParts-java.lang.String-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>breakIntoParts</h4>
<pre>public&nbsp;java.lang.String[]&nbsp;breakIntoParts(java.lang.String&nbsp;pvName)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../org/epics/archiverappliance/config/PVNameToKeyMapping.html#breakIntoParts-java.lang.String-">PVNameToKeyMapping</a></code></span></div>
<div class="block">Break a PV name into parts separated by the site specific separators
 For examples, ABC:123:DEF gets broken into [ABC, 123, DEF]</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../org/epics/archiverappliance/config/PVNameToKeyMapping.html#breakIntoParts-java.lang.String-">breakIntoParts</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/epics/archiverappliance/config/PVNameToKeyMapping.html" title="interface in org.epics.archiverappliance.config">PVNameToKeyMapping</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ConvertPVNameToKey.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/epics/archiverappliance/config/ConfigService.WAR_FILE.html" title="enum in org.epics.archiverappliance.config"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../org/epics/archiverappliance/config/DefaultConfigService.html" title="class in org.epics.archiverappliance.config"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/epics/archiverappliance/config/ConvertPVNameToKey.html" target="_top">Frames</a></li>
<li><a href="ConvertPVNameToKey.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>

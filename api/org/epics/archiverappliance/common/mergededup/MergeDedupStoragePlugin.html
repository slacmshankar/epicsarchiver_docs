<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (12.0.1) on Tue Nov 30 10:22:56 PST 2021 -->
<title>MergeDedupStoragePlugin</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2021-11-30">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../../jquery/jquery-3.3.1.js"></script>
<script type="text/javascript" src="../../../../../jquery/jquery-migrate-3.0.1.js"></script>
<script type="text/javascript" src="../../../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="MergeDedupStoragePlugin";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/MergeDedupStoragePlugin.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.epics.archiverappliance.common.mergededup</a></div>
<h2 title="Class MergeDedupStoragePlugin" class="title">Class MergeDedupStoragePlugin</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.epics.archiverappliance.common.mergededup.MergeDedupStoragePlugin</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="../../etl/ETLDest.html" title="interface in org.epics.archiverappliance.etl">ETLDest</a></code>, <code><a href="../../etl/ETLSource.html" title="interface in org.epics.archiverappliance.etl">ETLSource</a></code>, <code><a href="../../etl/StorageMetrics.html" title="interface in org.epics.archiverappliance.etl">StorageMetrics</a></code>, <code><a href="../../Reader.html" title="interface in org.epics.archiverappliance">Reader</a></code>, <code><a href="../../StoragePlugin.html" title="interface in org.epics.archiverappliance">StoragePlugin</a></code>, <code><a href="../../Writer.html" title="interface in org.epics.archiverappliance">Writer</a></code></dd>
</dl>
<hr>
<pre>public class <span class="typeNameLabel">MergeDedupStoragePlugin</span>
extends <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a>
implements <a href="../../StoragePlugin.html" title="interface in org.epics.archiverappliance">StoragePlugin</a>, <a href="../../etl/ETLSource.html" title="interface in org.epics.archiverappliance.etl">ETLSource</a>, <a href="../../etl/ETLDest.html" title="interface in org.epics.archiverappliance.etl">ETLDest</a>, <a href="../../etl/StorageMetrics.html" title="interface in org.epics.archiverappliance.etl">StorageMetrics</a></pre>
<div class="block">The MergeDedupStoragePlugin is primarily meant for achieving a small amount of failover in the archiving of a PV.
 The scheme is to have another appliance also archive the same PV and then merge the data from that appliance into this one during ETL. 
 This appliance is the <b><i>dest</i></b> appliance; this is where the data is merged into. 
 The <b><i>other</i></b> appliance is an independent EPICS archiver appliance archiving the same PV; that is, it is not part of this cluster of appliances.
 There are no special requirements for the <i>other</i> appliance other than that it should archive the same PV (and of course, a reasonably similar version to this one).
 No calls are made to the <i>other</i> appliance to cleanup any data after consolidation; so, for convenience, the <i>other</i> appliance can be configured with a BlackholeStoragePlugin to automatically delete data after a certain time.
   
 The MergeDedupStoragePlugin has two StoragePlugins parameters in its configuration.
 <ul>
 <li>The <code>dest</code> parameter configures the data store in this appliance.</li>
 <li>The <code>other</code> parameter points to the backup appliance using the <code>data_retrieval_url</code> of the <i>other</i> appliance.
 </li>
 </ul>
 The <i>other</i> appliance also acts an ETL gating point; that is, we do not move the data out of this data store unless we get a valid response from the <i>other</i> appliance when we fetch data during ETL. 
 So, ETL for this PV in this appliance will stop if you bring down the <i>other</i> appliance. It will automatically resume and continue from where it left off once you bring the <i>other</i> appliance back up.
 Note that data is merged into this appliance only during ETL. So, if you have data that is outside the ETL window ( some complex combination of pause resume etc), you'll have to manually merge the data in.
 This can be done using the <code>mergeInData</code> BPL call; the PV needs to be paused for this purpose.
 
 <div>As an example, assume that you wish to merge the data when you move data from the MTS to LTS; then you define your MTS in this appliance as a MergeDedupStoragePlugin.
 If, for example. 
 <ul>
 <li>you use <code>pb://localhost?name=MTS&amp;rootFolder=${ARCHAPPL_MEDIUM_TERM_FOLDER}&amp;partitionGranularity=PARTITION_DAY&amp;hold=2&amp;gather=1</code> as your regular MTS.</li>
 <li>the <code>data_retrieval_url</code> for the <i>other</i> appliance is <code>http://localhost:17669/retrieval</code></li>
 </ul>
 then, we'd define the MTS for this PV for this appliance as <pre><code><b>merge://</b>localhost?<b>name</b>=MTS
&amp;<b>dest</b>=pb%3A%2F%2Flocalhost%3Fname%3DMTS%26rootFolder%3D%24%7BARCHAPPL_MEDIUM_TERM_FOLDER%7D%26partitionGranularity%3DPARTITION_DAY%26hold%3D2%26gather%3D1
&amp;<b>other</b>=pbraw%3A%2F%2Flocalhost%3Fname%3DMTS%26rawURL%3Dhttp%253A%252F%252Flocalhost%253A17669%252Fretrieval%252Fdata%252FgetData.raw</code></pre>
 where both the <b>dest</b> and <b>other</b> parameters are URL encoded.
 <ul>
 <li><b>dest</b> is URL encoded version of <code>pb://localhost?name=MTS&amp;rootFolder=${ARCHAPPL_MEDIUM_TERM_FOLDER}&amp;partitionGranularity=PARTITION_DAY&amp;hold=2&amp;gather=1</code></li>
 <li><b>other</b> is URL encoded version of <code>pbraw://localhost?name=MTS&amp;<b>rawURL</b>=http%3A%2F%2Flocalhost%3A17669%2Fretrieval%2Fdata%2FgetData.raw</code>
 <ul>
 <li>where the <b>rawURL</b> is the URL encoded version of <code>http://localhost:17669/retrieval/data/getData.raw</code></li>
 </ul>
 </li>
 </ul> 
 </div>
 
 <div>From an implementation perspective, this can be understood as a plugin that delegates almost all calls to the <code>dest</code> plugin. 
 Calls that fetch data out of this plugin are merged/deduped with the <code>other</code> plugin.</div></div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>mshankar</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<div class="memberSummary">
<table>
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E()">MergeDedupStoragePlugin</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<div class="memberSummary">
<div role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="memberSummary_tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="activeTableTab">All Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="tableTab" onclick="show(2);">Instance Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t4" class="tableTab" onclick="show(8);">Concrete Methods</button></div>
<div id="memberSummary_tabpanel" role="tabpanel">
<table aria-labelledby="t0">
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor" id="i0">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#appendData(org.epics.archiverappliance.common.BasicContext,java.lang.String,org.epics.archiverappliance.EventStream)">appendData</a></span>&#8203;(<a href="../BasicContext.html" title="class in org.epics.archiverappliance.common">BasicContext</a>&nbsp;context,
          <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;pvName,
          <a href="../../EventStream.html" title="interface in org.epics.archiverappliance">EventStream</a>&nbsp;stream)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i1">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#appendToETLAppendData(java.lang.String,org.epics.archiverappliance.EventStream,org.epics.archiverappliance.etl.ETLContext)">appendToETLAppendData</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;pvName,
                     <a href="../../EventStream.html" title="interface in org.epics.archiverappliance">EventStream</a>&nbsp;stream,
                     <a href="../../etl/ETLContext.html" title="class in org.epics.archiverappliance.etl">ETLContext</a>&nbsp;context)</code></th>
<td class="colLast">
<div class="block">This appends an EventStream to the ETL append data for a PV.</div>
</td>
</tr>
<tr class="altColor" id="i2">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#commitETLAppendData(java.lang.String,org.epics.archiverappliance.etl.ETLContext)">commitETLAppendData</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;pvName,
                   <a href="../../etl/ETLContext.html" title="class in org.epics.archiverappliance.etl">ETLContext</a>&nbsp;context)</code></th>
<td class="colLast">
<div class="block">This concatenates the ETL append data for a PV with the PV's destination data.</div>
</td>
</tr>
<tr class="rowColor" id="i3">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#consolidateOnShutdown()">consolidateOnShutdown</a></span>()</code></th>
<td class="colLast">
<div class="block">Should ETL move data from this source to the destination on shutdown.</div>
</td>
</tr>
<tr class="altColor" id="i4">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#convert(org.epics.archiverappliance.common.BasicContext,java.lang.String,org.epics.archiverappliance.etl.ConversionFunction)">convert</a></span>&#8203;(<a href="../BasicContext.html" title="class in org.epics.archiverappliance.common">BasicContext</a>&nbsp;context,
       <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;pvName,
       <a href="../../etl/ConversionFunction.html" title="interface in org.epics.archiverappliance.etl">ConversionFunction</a>&nbsp;conversionFuntion)</code></th>
<td class="colLast">
<div class="block">Sometimes, PVs change types, EGUs etc.</div>
</td>
</tr>
<tr class="rowColor" id="i5">
<td class="colFirst"><code><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/util/List.html?is-external=true" title="class or interface in java.util" class="externalLink">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/util/concurrent/Callable.html?is-external=true" title="class or interface in java.util.concurrent" class="externalLink">Callable</a>&lt;<a href="../../EventStream.html" title="interface in org.epics.archiverappliance">EventStream</a>&gt;&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getDataForPV(org.epics.archiverappliance.common.BasicContext,java.lang.String,java.sql.Timestamp,java.sql.Timestamp,org.epics.archiverappliance.retrieval.postprocessors.PostProcessor)">getDataForPV</a></span>&#8203;(<a href="../BasicContext.html" title="class in org.epics.archiverappliance.common">BasicContext</a>&nbsp;context,
            <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;pvName,
            <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.sql/java/sql/Timestamp.html?is-external=true" title="class or interface in java.sql" class="externalLink">Timestamp</a>&nbsp;startTime,
            <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.sql/java/sql/Timestamp.html?is-external=true" title="class or interface in java.sql" class="externalLink">Timestamp</a>&nbsp;endTime,
            <a href="../../retrieval/postprocessors/PostProcessor.html" title="interface in org.epics.archiverappliance.retrieval.postprocessors">PostProcessor</a>&nbsp;postProcessor)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i6">
<td class="colFirst"><code><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getDescription()">getDescription</a></span>()</code></th>
<td class="colLast">
<div class="block">Get a string description of this plugin; one that can potentially be used in log messages and provide context.</div>
</td>
</tr>
<tr class="rowColor" id="i7">
<td class="colFirst"><code><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/util/List.html?is-external=true" title="class or interface in java.util" class="externalLink">List</a>&lt;<a href="../../etl/ETLInfo.html" title="class in org.epics.archiverappliance.etl">ETLInfo</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getETLStreams(java.lang.String,java.sql.Timestamp,org.epics.archiverappliance.etl.ETLContext)">getETLStreams</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;pv,
             <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.sql/java/sql/Timestamp.html?is-external=true" title="class or interface in java.sql" class="externalLink">Timestamp</a>&nbsp;currentTime,
             <a href="../../etl/ETLContext.html" title="class in org.epics.archiverappliance.etl">ETLContext</a>&nbsp;context)</code></th>
<td class="colLast">
<div class="block">Given a pv and a time, this method returns all the streams that are ready for ETL.</div>
</td>
</tr>
<tr class="altColor" id="i8">
<td class="colFirst"><code><a href="../../Event.html" title="interface in org.epics.archiverappliance">Event</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getFirstKnownEvent(org.epics.archiverappliance.common.BasicContext,java.lang.String)">getFirstKnownEvent</a></span>&#8203;(<a href="../BasicContext.html" title="class in org.epics.archiverappliance.common">BasicContext</a>&nbsp;context,
                  <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;pvName)</code></th>
<td class="colLast">
<div class="block">Get the first event for this PV.</div>
</td>
</tr>
<tr class="rowColor" id="i9">
<td class="colFirst"><code><a href="../../Event.html" title="interface in org.epics.archiverappliance">Event</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getLastKnownEvent(org.epics.archiverappliance.common.BasicContext,java.lang.String)">getLastKnownEvent</a></span>&#8203;(<a href="../BasicContext.html" title="class in org.epics.archiverappliance.common">BasicContext</a>&nbsp;context,
                 <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;pvName)</code></th>
<td class="colLast">
<div class="block">Gets the last known event in this destination.</div>
</td>
</tr>
<tr class="altColor" id="i10">
<td class="colFirst"><code><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getName()">getName</a></span>()</code></th>
<td class="colLast">
<div class="block">Multiple PVs will probably use the same storage area and we identify the area using the name.</div>
</td>
</tr>
<tr class="rowColor" id="i11">
<td class="colFirst"><code><a href="../PartitionGranularity.html" title="enum in org.epics.archiverappliance.common">PartitionGranularity</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getPartitionGranularity()">getPartitionGranularity</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i12">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getTotalSpace(org.epics.archiverappliance.etl.StorageMetricsContext)">getTotalSpace</a></span>&#8203;(<a href="../../etl/StorageMetricsContext.html" title="interface in org.epics.archiverappliance.etl">StorageMetricsContext</a>&nbsp;storageMetricsContext)</code></th>
<td class="colLast">
<div class="block">Gets the total space left on this device.</div>
</td>
</tr>
<tr class="rowColor" id="i13">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getUsableSpace(org.epics.archiverappliance.etl.StorageMetricsContext)">getUsableSpace</a></span>&#8203;(<a href="../../etl/StorageMetricsContext.html" title="interface in org.epics.archiverappliance.etl">StorageMetricsContext</a>&nbsp;storageMetricsContext)</code></th>
<td class="colLast">
<div class="block">Gets the space available to this VM on this device</div>
</td>
</tr>
<tr class="altColor" id="i14">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#initialize(java.lang.String,org.epics.archiverappliance.config.ConfigService)">initialize</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;configURL,
          <a href="../../config/ConfigService.html" title="interface in org.epics.archiverappliance.config">ConfigService</a>&nbsp;configService)</code></th>
<td class="colLast">
<div class="block">Each storage plugin is registered to a URI scheme; for example, the PlainStoragePBPlugin uses pb:// as the scheme.</div>
</td>
</tr>
<tr class="rowColor" id="i15">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#markForDeletion(org.epics.archiverappliance.etl.ETLInfo,org.epics.archiverappliance.etl.ETLContext)">markForDeletion</a></span>&#8203;(<a href="../../etl/ETLInfo.html" title="class in org.epics.archiverappliance.etl">ETLInfo</a>&nbsp;info,
               <a href="../../etl/ETLContext.html" title="class in org.epics.archiverappliance.etl">ETLContext</a>&nbsp;context)</code></th>
<td class="colLast">
<div class="block">Delete the ETLStream identifier by info when you can as it has already been consumed by the ETL destination.</div>
</td>
</tr>
<tr class="altColor" id="i16">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#prepareForNewPartition(java.lang.String,org.epics.archiverappliance.Event,org.epics.archiverappliance.config.ArchDBRTypes,org.epics.archiverappliance.etl.ETLContext)">prepareForNewPartition</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;pvName,
                      <a href="../../Event.html" title="interface in org.epics.archiverappliance">Event</a>&nbsp;ev,
                      <a href="../../config/ArchDBRTypes.html" title="enum in org.epics.archiverappliance.config">ArchDBRTypes</a>&nbsp;archDBRType,
                      <a href="../../etl/ETLContext.html" title="class in org.epics.archiverappliance.etl">ETLContext</a>&nbsp;context)</code></th>
<td class="colLast">
<div class="block">This informs the destination that we are switching to a new partition and this dest needs to execute its pre-processing for a new partition.</div>
</td>
</tr>
<tr class="rowColor" id="i17">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#renamePV(org.epics.archiverappliance.common.BasicContext,java.lang.String,java.lang.String)">renamePV</a></span>&#8203;(<a href="../BasicContext.html" title="class in org.epics.archiverappliance.common">BasicContext</a>&nbsp;context,
        <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;oldName,
        <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;newName)</code></th>
<td class="colLast">
<div class="block">Change the name of a PV.</div>
</td>
</tr>
<tr class="altColor" id="i18">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#runPostProcessors(java.lang.String,org.epics.archiverappliance.config.ArchDBRTypes,org.epics.archiverappliance.etl.ETLContext)">runPostProcessors</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;pvName,
                 <a href="../../config/ArchDBRTypes.html" title="enum in org.epics.archiverappliance.config">ArchDBRTypes</a>&nbsp;dbrtype,
                 <a href="../../etl/ETLContext.html" title="class in org.epics.archiverappliance.etl">ETLContext</a>&nbsp;context)</code></th>
<td class="colLast">
<div class="block">Run the post processors associated with this plugin if any for this pv.</div>
</td>
</tr>
<tr class="rowColor" id="i19">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#spaceConsumedByPV(java.lang.String)">spaceConsumedByPV</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;pvName)</code></th>
<td class="colLast">
<div class="block">Gets an estimate of the space consumed by this PV on this device.</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang" class="externalLink">clone</a>, <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang" class="externalLink">equals</a>, <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang" class="externalLink">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang" class="externalLink">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang" class="externalLink">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang" class="externalLink">notify</a>, <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang" class="externalLink">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang" class="externalLink">toString</a>, <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html?is-external=true#wait(long,int)" title="class or interface in java.lang" class="externalLink">wait</a></code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>MergeDedupStoragePlugin</h4>
<pre>public&nbsp;MergeDedupStoragePlugin()</pre>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="getDataForPV(org.epics.archiverappliance.common.BasicContext,java.lang.String,java.sql.Timestamp,java.sql.Timestamp,org.epics.archiverappliance.retrieval.postprocessors.PostProcessor)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDataForPV</h4>
<pre class="methodSignature">public&nbsp;<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/util/List.html?is-external=true" title="class or interface in java.util" class="externalLink">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/util/concurrent/Callable.html?is-external=true" title="class or interface in java.util.concurrent" class="externalLink">Callable</a>&lt;<a href="../../EventStream.html" title="interface in org.epics.archiverappliance">EventStream</a>&gt;&gt;&nbsp;getDataForPV&#8203;(<a href="../BasicContext.html" title="class in org.epics.archiverappliance.common">BasicContext</a>&nbsp;context,
                                                <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;pvName,
                                                <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.sql/java/sql/Timestamp.html?is-external=true" title="class or interface in java.sql" class="externalLink">Timestamp</a>&nbsp;startTime,
                                                <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.sql/java/sql/Timestamp.html?is-external=true" title="class or interface in java.sql" class="externalLink">Timestamp</a>&nbsp;endTime,
                                                <a href="../../retrieval/postprocessors/PostProcessor.html" title="interface in org.epics.archiverappliance.retrieval.postprocessors">PostProcessor</a>&nbsp;postProcessor)
                                         throws <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../Reader.html#getDataForPV(org.epics.archiverappliance.common.BasicContext,java.lang.String,java.sql.Timestamp,java.sql.Timestamp,org.epics.archiverappliance.retrieval.postprocessors.PostProcessor)">getDataForPV</a></code>&nbsp;in interface&nbsp;<code><a href="../../Reader.html" title="interface in org.epics.archiverappliance">Reader</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code></dd>
</dl>
</li>
</ul>
<a id="getETLStreams(java.lang.String,java.sql.Timestamp,org.epics.archiverappliance.etl.ETLContext)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getETLStreams</h4>
<pre class="methodSignature">public&nbsp;<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/util/List.html?is-external=true" title="class or interface in java.util" class="externalLink">List</a>&lt;<a href="../../etl/ETLInfo.html" title="class in org.epics.archiverappliance.etl">ETLInfo</a>&gt;&nbsp;getETLStreams&#8203;(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;pv,
                                   <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.sql/java/sql/Timestamp.html?is-external=true" title="class or interface in java.sql" class="externalLink">Timestamp</a>&nbsp;currentTime,
                                   <a href="../../etl/ETLContext.html" title="class in org.epics.archiverappliance.etl">ETLContext</a>&nbsp;context)
                            throws <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../etl/ETLSource.html#getETLStreams(java.lang.String,java.sql.Timestamp,org.epics.archiverappliance.etl.ETLContext)">ETLSource</a></code></span></div>
<div class="block">Given a pv and a time, this method returns all the streams that are ready for ETL.
 For example, if the partition granularity of a source is an hour, then this method returns all the streams that are in this source for the previous hours.
 Ideally, these streams must be closed for writing and should not change.
 The ETL process will consolidates these streams into the ETL destination, which is expected to be at a longer time granularity.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../etl/ETLSource.html#getETLStreams(java.lang.String,java.sql.Timestamp,org.epics.archiverappliance.etl.ETLContext)">getETLStreams</a></code>&nbsp;in interface&nbsp;<code><a href="../../etl/ETLSource.html" title="interface in org.epics.archiverappliance.etl">ETLSource</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pv</code> - The name of PV.</dd>
<dd><code>currentTime</code> - The time that is being used as the cutoff. If we pass in a timestamp way out into the future, we should return all the streams available.</dd>
<dd><code>context</code> - ETLContext</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>List ETLinfo</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code> - &emsp;</dd>
</dl>
</li>
</ul>
<a id="getFirstKnownEvent(org.epics.archiverappliance.common.BasicContext,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFirstKnownEvent</h4>
<pre class="methodSignature">public&nbsp;<a href="../../Event.html" title="interface in org.epics.archiverappliance">Event</a>&nbsp;getFirstKnownEvent&#8203;(<a href="../BasicContext.html" title="class in org.epics.archiverappliance.common">BasicContext</a>&nbsp;context,
                                <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;pvName)
                         throws <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../Reader.html#getFirstKnownEvent(org.epics.archiverappliance.common.BasicContext,java.lang.String)">Reader</a></code></span></div>
<div class="block">Get the first event for this PV.
 This call is used to optimize away calls to other readers that have older data.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../Reader.html#getFirstKnownEvent(org.epics.archiverappliance.common.BasicContext,java.lang.String)">getFirstKnownEvent</a></code>&nbsp;in interface&nbsp;<code><a href="../../Reader.html" title="interface in org.epics.archiverappliance">Reader</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>context</code> - &emsp;</dd>
<dd><code>pvName</code> - The PV name</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Event The first event of pvName</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code> - &emsp;</dd>
</dl>
</li>
</ul>
<a id="getLastKnownEvent(org.epics.archiverappliance.common.BasicContext,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastKnownEvent</h4>
<pre class="methodSignature">public&nbsp;<a href="../../Event.html" title="interface in org.epics.archiverappliance">Event</a>&nbsp;getLastKnownEvent&#8203;(<a href="../BasicContext.html" title="class in org.epics.archiverappliance.common">BasicContext</a>&nbsp;context,
                               <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;pvName)
                        throws <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../Writer.html#getLastKnownEvent(org.epics.archiverappliance.common.BasicContext,java.lang.String)">Writer</a></code></span></div>
<div class="block">Gets the last known event in this destination. 
 Future events will be appended to this destination only if their timestamp is more recent than the timestamp of this event.
 If there is no last known event, then a null is returned.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../Writer.html#getLastKnownEvent(org.epics.archiverappliance.common.BasicContext,java.lang.String)">getLastKnownEvent</a></code>&nbsp;in interface&nbsp;<code><a href="../../Writer.html" title="interface in org.epics.archiverappliance">Writer</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>context</code> - &emsp;</dd>
<dd><code>pvName</code> - The PV name</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Event The last known event of pvName</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code> - &emsp;</dd>
</dl>
</li>
</ul>
<a id="appendData(org.epics.archiverappliance.common.BasicContext,java.lang.String,org.epics.archiverappliance.EventStream)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>appendData</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;appendData&#8203;(<a href="../BasicContext.html" title="class in org.epics.archiverappliance.common">BasicContext</a>&nbsp;context,
                          <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;pvName,
                          <a href="../../EventStream.html" title="interface in org.epics.archiverappliance">EventStream</a>&nbsp;stream)
                   throws <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../Writer.html#appendData(org.epics.archiverappliance.common.BasicContext,java.lang.String,org.epics.archiverappliance.EventStream)">appendData</a></code>&nbsp;in interface&nbsp;<code><a href="../../Writer.html" title="interface in org.epics.archiverappliance">Writer</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code></dd>
</dl>
</li>
</ul>
<a id="getTotalSpace(org.epics.archiverappliance.etl.StorageMetricsContext)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTotalSpace</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;getTotalSpace&#8203;(<a href="../../etl/StorageMetricsContext.html" title="interface in org.epics.archiverappliance.etl">StorageMetricsContext</a>&nbsp;storageMetricsContext)
                   throws <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../etl/StorageMetrics.html#getTotalSpace(org.epics.archiverappliance.etl.StorageMetricsContext)">StorageMetrics</a></code></span></div>
<div class="block">Gets the total space left on this device.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../etl/StorageMetrics.html#getTotalSpace(org.epics.archiverappliance.etl.StorageMetricsContext)">getTotalSpace</a></code>&nbsp;in interface&nbsp;<code><a href="../../etl/StorageMetrics.html" title="interface in org.epics.archiverappliance.etl">StorageMetrics</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>storageMetricsContext</code> - StorageMetricsContext</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>getTotalSpac &emsp;</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code> - &emsp;</dd>
</dl>
</li>
</ul>
<a id="getUsableSpace(org.epics.archiverappliance.etl.StorageMetricsContext)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getUsableSpace</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;getUsableSpace&#8203;(<a href="../../etl/StorageMetricsContext.html" title="interface in org.epics.archiverappliance.etl">StorageMetricsContext</a>&nbsp;storageMetricsContext)
                    throws <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../etl/StorageMetrics.html#getUsableSpace(org.epics.archiverappliance.etl.StorageMetricsContext)">StorageMetrics</a></code></span></div>
<div class="block">Gets the space available to this VM on this device</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../etl/StorageMetrics.html#getUsableSpace(org.epics.archiverappliance.etl.StorageMetricsContext)">getUsableSpace</a></code>&nbsp;in interface&nbsp;<code><a href="../../etl/StorageMetrics.html" title="interface in org.epics.archiverappliance.etl">StorageMetrics</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>storageMetricsContext</code> - StorageMetricsContext</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>getUsableSpace &emsp;</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code> - &emsp;</dd>
</dl>
</li>
</ul>
<a id="spaceConsumedByPV(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>spaceConsumedByPV</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;spaceConsumedByPV&#8203;(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;pvName)
                       throws <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../etl/StorageMetrics.html#spaceConsumedByPV(java.lang.String)">StorageMetrics</a></code></span></div>
<div class="block">Gets an estimate of the space consumed by this PV on this device.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../etl/StorageMetrics.html#spaceConsumedByPV(java.lang.String)">spaceConsumedByPV</a></code>&nbsp;in interface&nbsp;<code><a href="../../etl/StorageMetrics.html" title="interface in org.epics.archiverappliance.etl">StorageMetrics</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pvName</code> - The name of PV.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>spaceConsumedByPV &emsp;</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code> - &emsp;</dd>
</dl>
</li>
</ul>
<a id="prepareForNewPartition(java.lang.String,org.epics.archiverappliance.Event,org.epics.archiverappliance.config.ArchDBRTypes,org.epics.archiverappliance.etl.ETLContext)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>prepareForNewPartition</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;prepareForNewPartition&#8203;(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;pvName,
                                      <a href="../../Event.html" title="interface in org.epics.archiverappliance">Event</a>&nbsp;ev,
                                      <a href="../../config/ArchDBRTypes.html" title="enum in org.epics.archiverappliance.config">ArchDBRTypes</a>&nbsp;archDBRType,
                                      <a href="../../etl/ETLContext.html" title="class in org.epics.archiverappliance.etl">ETLContext</a>&nbsp;context)
                               throws <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../etl/ETLDest.html#prepareForNewPartition(java.lang.String,org.epics.archiverappliance.Event,org.epics.archiverappliance.config.ArchDBRTypes,org.epics.archiverappliance.etl.ETLContext)">ETLDest</a></code></span></div>
<div class="block">This informs the destination that we are switching to a new partition and this dest needs to execute its pre-processing for a new partition.
 For example, in a PlainPBStorage plugin, this will close the previous fileoutputstreams if any, open a new stream to the file backing the new partition writing a header if needed.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../etl/ETLDest.html#prepareForNewPartition(java.lang.String,org.epics.archiverappliance.Event,org.epics.archiverappliance.config.ArchDBRTypes,org.epics.archiverappliance.etl.ETLContext)">prepareForNewPartition</a></code>&nbsp;in interface&nbsp;<code><a href="../../etl/ETLDest.html" title="interface in org.epics.archiverappliance.etl">ETLDest</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pvName</code> - The name of PV.</dd>
<dd><code>ev</code> - This is used to determine the partition for the new partition</dd>
<dd><code>archDBRType</code> - ArchDBRTypes</dd>
<dd><code>context</code> - ETLContext</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>boolean True or False</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code> - &emsp;</dd>
</dl>
</li>
</ul>
<a id="appendToETLAppendData(java.lang.String,org.epics.archiverappliance.EventStream,org.epics.archiverappliance.etl.ETLContext)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>appendToETLAppendData</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;appendToETLAppendData&#8203;(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;pvName,
                                     <a href="../../EventStream.html" title="interface in org.epics.archiverappliance">EventStream</a>&nbsp;stream,
                                     <a href="../../etl/ETLContext.html" title="class in org.epics.archiverappliance.etl">ETLContext</a>&nbsp;context)
                              throws <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../etl/ETLDest.html#appendToETLAppendData(java.lang.String,org.epics.archiverappliance.EventStream,org.epics.archiverappliance.etl.ETLContext)">ETLDest</a></code></span></div>
<div class="block">This appends an EventStream to the ETL append data for a PV.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../etl/ETLDest.html#appendToETLAppendData(java.lang.String,org.epics.archiverappliance.EventStream,org.epics.archiverappliance.etl.ETLContext)">appendToETLAppendData</a></code>&nbsp;in interface&nbsp;<code><a href="../../etl/ETLDest.html" title="interface in org.epics.archiverappliance.etl">ETLDest</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pvName</code> - The name of PV.</dd>
<dd><code>stream</code> - The EventStream to append to the append data for a PV.</dd>
<dd><code>context</code> - ETLContext</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>boolean True or False</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code> - &emsp;</dd>
</dl>
</li>
</ul>
<a id="commitETLAppendData(java.lang.String,org.epics.archiverappliance.etl.ETLContext)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>commitETLAppendData</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;commitETLAppendData&#8203;(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;pvName,
                                   <a href="../../etl/ETLContext.html" title="class in org.epics.archiverappliance.etl">ETLContext</a>&nbsp;context)
                            throws <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../etl/ETLDest.html#commitETLAppendData(java.lang.String,org.epics.archiverappliance.etl.ETLContext)">ETLDest</a></code></span></div>
<div class="block">This concatenates the ETL append data for a PV with the PV's destination data.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../etl/ETLDest.html#commitETLAppendData(java.lang.String,org.epics.archiverappliance.etl.ETLContext)">commitETLAppendData</a></code>&nbsp;in interface&nbsp;<code><a href="../../etl/ETLDest.html" title="interface in org.epics.archiverappliance.etl">ETLDest</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pvName</code> - The name of PV.</dd>
<dd><code>context</code> - ETLContext</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>boolean True or False</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code> - &emsp;</dd>
</dl>
</li>
</ul>
<a id="runPostProcessors(java.lang.String,org.epics.archiverappliance.config.ArchDBRTypes,org.epics.archiverappliance.etl.ETLContext)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>runPostProcessors</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;runPostProcessors&#8203;(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;pvName,
                                 <a href="../../config/ArchDBRTypes.html" title="enum in org.epics.archiverappliance.config">ArchDBRTypes</a>&nbsp;dbrtype,
                                 <a href="../../etl/ETLContext.html" title="class in org.epics.archiverappliance.etl">ETLContext</a>&nbsp;context)
                          throws <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../etl/ETLDest.html#runPostProcessors(java.lang.String,org.epics.archiverappliance.config.ArchDBRTypes,org.epics.archiverappliance.etl.ETLContext)">ETLDest</a></code></span></div>
<div class="block">Run the post processors associated with this plugin if any for this pv.
 The post processing is done after the commit and outside of the ETL transaction.
 This process is expected to catch up on previously missed/incomplete computation of cached post processing files.
 I can think of at least two usecases for this - one where we decide to go back and add a post processor for a pv and one where we change the algorithm for the post processor and want to recompute all the cached files again.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../etl/ETLDest.html#runPostProcessors(java.lang.String,org.epics.archiverappliance.config.ArchDBRTypes,org.epics.archiverappliance.etl.ETLContext)">runPostProcessors</a></code>&nbsp;in interface&nbsp;<code><a href="../../etl/ETLDest.html" title="interface in org.epics.archiverappliance.etl">ETLDest</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pvName</code> - The name of PV.</dd>
<dd><code>dbrtype</code> - ArchDBRTypes</dd>
<dd><code>context</code> - ETLContext</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>boolean True or False</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code> - &emsp;</dd>
</dl>
</li>
</ul>
<a id="markForDeletion(org.epics.archiverappliance.etl.ETLInfo,org.epics.archiverappliance.etl.ETLContext)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>markForDeletion</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;markForDeletion&#8203;(<a href="../../etl/ETLInfo.html" title="class in org.epics.archiverappliance.etl">ETLInfo</a>&nbsp;info,
                            <a href="../../etl/ETLContext.html" title="class in org.epics.archiverappliance.etl">ETLContext</a>&nbsp;context)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../etl/ETLSource.html#markForDeletion(org.epics.archiverappliance.etl.ETLInfo,org.epics.archiverappliance.etl.ETLContext)">ETLSource</a></code></span></div>
<div class="block">Delete the ETLStream identifier by info when you can as it has already been consumed by the ETL destination.
 You can delete it later or immediately.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../etl/ETLSource.html#markForDeletion(org.epics.archiverappliance.etl.ETLInfo,org.epics.archiverappliance.etl.ETLContext)">markForDeletion</a></code>&nbsp;in interface&nbsp;<code><a href="../../etl/ETLSource.html" title="interface in org.epics.archiverappliance.etl">ETLSource</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>info</code> - ETLInfo</dd>
<dd><code>context</code> - ETLContext</dd>
</dl>
</li>
</ul>
<a id="getPartitionGranularity()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPartitionGranularity</h4>
<pre class="methodSignature">public&nbsp;<a href="../PartitionGranularity.html" title="enum in org.epics.archiverappliance.common">PartitionGranularity</a>&nbsp;getPartitionGranularity()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../etl/ETLDest.html#getPartitionGranularity()">getPartitionGranularity</a></code>&nbsp;in interface&nbsp;<code><a href="../../etl/ETLDest.html" title="interface in org.epics.archiverappliance.etl">ETLDest</a></code></dd>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../etl/ETLSource.html#getPartitionGranularity()">getPartitionGranularity</a></code>&nbsp;in interface&nbsp;<code><a href="../../etl/ETLSource.html" title="interface in org.epics.archiverappliance.etl">ETLSource</a></code></dd>
</dl>
</li>
</ul>
<a id="consolidateOnShutdown()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>consolidateOnShutdown</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;consolidateOnShutdown()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../etl/ETLSource.html#consolidateOnShutdown()">ETLSource</a></code></span></div>
<div class="block">Should ETL move data from this source to the destination on shutdown. 
 For example, if you are using a ramdisk for the STS and you have a UPS, you can minimize any data loss but turning this bit on for data stores that are on the ramdisk.
 On shutdown, ETL will try to move the data out of this store into the next lifetime store.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../etl/ETLSource.html#consolidateOnShutdown()">consolidateOnShutdown</a></code>&nbsp;in interface&nbsp;<code><a href="../../etl/ETLSource.html" title="interface in org.epics.archiverappliance.etl">ETLSource</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>boolean True or False</dd>
</dl>
</li>
</ul>
<a id="getName()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getName</h4>
<pre class="methodSignature">public&nbsp;<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;getName()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../StoragePlugin.html#getName()">StoragePlugin</a></code></span></div>
<div class="block">Multiple PVs will probably use the same storage area and we identify the area using the name.
 This is principally used in capacity planning/load balancing to identify the storage area for the PV.
 We should make sure that storage's with similar lifetimes have the same name in all the appliances.
 The name is also used to identify the storage in the storage report.
 For example, the PlainPBStoragePlugin takes a name parameter and we should use something like STS as the identity for the short term store in all the appliances.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../etl/StorageMetrics.html#getName()">getName</a></code>&nbsp;in interface&nbsp;<code><a href="../../etl/StorageMetrics.html" title="interface in org.epics.archiverappliance.etl">StorageMetrics</a></code></dd>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../StoragePlugin.html#getName()">getName</a></code>&nbsp;in interface&nbsp;<code><a href="../../StoragePlugin.html" title="interface in org.epics.archiverappliance">StoragePlugin</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>name</dd>
</dl>
</li>
</ul>
<a id="getDescription()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDescription</h4>
<pre class="methodSignature">public&nbsp;<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;getDescription()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../StoragePlugin.html#getDescription()">StoragePlugin</a></code></span></div>
<div class="block">Get a string description of this plugin; one that can potentially be used in log messages and provide context.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../etl/ETLDest.html#getDescription()">getDescription</a></code>&nbsp;in interface&nbsp;<code><a href="../../etl/ETLDest.html" title="interface in org.epics.archiverappliance.etl">ETLDest</a></code></dd>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../etl/ETLSource.html#getDescription()">getDescription</a></code>&nbsp;in interface&nbsp;<code><a href="../../etl/ETLSource.html" title="interface in org.epics.archiverappliance.etl">ETLSource</a></code></dd>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../StoragePlugin.html#getDescription()">getDescription</a></code>&nbsp;in interface&nbsp;<code><a href="../../StoragePlugin.html" title="interface in org.epics.archiverappliance">StoragePlugin</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>description</dd>
</dl>
</li>
</ul>
<a id="initialize(java.lang.String,org.epics.archiverappliance.config.ConfigService)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initialize</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;initialize&#8203;(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;configURL,
                       <a href="../../config/ConfigService.html" title="interface in org.epics.archiverappliance.config">ConfigService</a>&nbsp;configService)
                throws <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../StoragePlugin.html#initialize(java.lang.String,org.epics.archiverappliance.config.ConfigService)">StoragePlugin</a></code></span></div>
<div class="block">Each storage plugin is registered to a URI scheme; for example, the PlainStoragePBPlugin uses pb:// as the scheme.
 Configuration for a storage plugin typically comes in as a URL like URI.
 <ol> 
 <li>The config service identifies the storage plugin using the scheme (&quot;pb&quot; maps to PlainStoragePBPlugin)</li>
 <li>Creates an instance using the default constructor.</li>
 <li>Calls initialize with the complete URL.</li>
 </ol>
 The storage plugin is expected to use the parameters in the URL to initialize itself.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../StoragePlugin.html#initialize(java.lang.String,org.epics.archiverappliance.config.ConfigService)">initialize</a></code>&nbsp;in interface&nbsp;<code><a href="../../StoragePlugin.html" title="interface in org.epics.archiverappliance">StoragePlugin</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>configURL</code> - The complete URL</dd>
<dd><code>configService</code> - &emsp;</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code> - &emsp;</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../config/StoragePluginURLParser.html" title="class in org.epics.archiverappliance.config"><code>StoragePluginURLParser</code></a></dd>
</dl>
</li>
</ul>
<a id="renamePV(org.epics.archiverappliance.common.BasicContext,java.lang.String,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>renamePV</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;renamePV&#8203;(<a href="../BasicContext.html" title="class in org.epics.archiverappliance.common">BasicContext</a>&nbsp;context,
                     <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;oldName,
                     <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;newName)
              throws <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../StoragePlugin.html#renamePV(org.epics.archiverappliance.common.BasicContext,java.lang.String,java.lang.String)">StoragePlugin</a></code></span></div>
<div class="block">Change the name of a PV. This happens occasionally in the EPICS world when people change the names of PVs but want to retain the data.
 This method is used to change the name of the PV in any of the datasets for PV <code>oldName</code>.
 For example, in PB files, the name of the PV is encoded in the file names and is also stored in the header. In this case, we expect the plugin to move the data to new files names and change the PV name in the file header.
 To avoid getting into issues about data changing when renaming files, the PV can be assumed to be in a paused state.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../StoragePlugin.html#renamePV(org.epics.archiverappliance.common.BasicContext,java.lang.String,java.lang.String)">renamePV</a></code>&nbsp;in interface&nbsp;<code><a href="../../StoragePlugin.html" title="interface in org.epics.archiverappliance">StoragePlugin</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>context</code> - &emsp;</dd>
<dd><code>oldName</code> - The old PV name</dd>
<dd><code>newName</code> - The new PV name</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code> - &emsp;</dd>
</dl>
</li>
</ul>
<a id="convert(org.epics.archiverappliance.common.BasicContext,java.lang.String,org.epics.archiverappliance.etl.ConversionFunction)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>convert</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;convert&#8203;(<a href="../BasicContext.html" title="class in org.epics.archiverappliance.common">BasicContext</a>&nbsp;context,
                    <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;pvName,
                    <a href="../../etl/ConversionFunction.html" title="interface in org.epics.archiverappliance.etl">ConversionFunction</a>&nbsp;conversionFuntion)
             throws <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../StoragePlugin.html#convert(org.epics.archiverappliance.common.BasicContext,java.lang.String,org.epics.archiverappliance.etl.ConversionFunction)">StoragePlugin</a></code></span></div>
<div class="block">Sometimes, PVs change types, EGUs etc. 
 In these cases, we are left with the problem of what to do with the already archived data.
 We can rename the PV to a new but related name - this keeps the existing data as is.
 Or, we can attempt to convert to the new type, EGU etc.
 This method can be used to convert the existing data using the supplied conversion function.
 Conversions should be all or nothing; that is, first convert all the streams into temporary chunks and then do a bulk rename once all the conversions have succeeded.
 Note that we'll also be using the same conversion mechanism for imports and other functions that change data.
 So, when/if implementing the conversion function, make sure we respect the typical expectations within the archiver - monotonically increasing timestamps and so on.
 To avoid getting into issues about data changing when converting, the PV can be assumed to be in a paused state.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../StoragePlugin.html#convert(org.epics.archiverappliance.common.BasicContext,java.lang.String,org.epics.archiverappliance.etl.ConversionFunction)">convert</a></code>&nbsp;in interface&nbsp;<code><a href="../../StoragePlugin.html" title="interface in org.epics.archiverappliance">StoragePlugin</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>context</code> - &emsp;</dd>
<dd><code>pvName</code> - The PV name</dd>
<dd><code>conversionFuntion</code> - &emsp;</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code> - &emsp;</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/MergeDedupStoragePlugin.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</body>
</html>
